Demand of a facility load for electrical energy is monitored and compared to a demand cap for a demand period. A demand cap may be set for peak periods, another demand cap may be set for part-peak periods, and yet another demand cap may be set for off-peak periods. Dispatch of electrical energy from the energy storage system is based on the demand of the facility load relative to the demand cap.
Claims 1. A method of dispatching electrical energy from an energy storage system, the method comprising: monitoring electrical energy demand of a facility load; setting a demand cap for a demand period; comparing the electrical energy demand of the facility load against the demand cap during the demand period; in response to determining that the electrical energy demand of the facility load is expected to be less than the demand cap, determining whether an energy storage system can dispatch electrical energy at a discharge limit for a duration equal to or longer than a remaining time in the demand period; and in response to determining that the energy storage system can dispatch electrical energy at the discharge limit for the duration equal to or longer than the remaining time in the demand period, discharging electrical energy from the energy storage system at the discharge limit. 2. The method of claim 1 further comprising: in response to determining that the electrical energy demand of the facility load is expected to be greater than the demand cap, discharging electrical energy from the energy storage system based on the demand cap. 3. The method of claim 2 wherein the energy storage system discharges electrical energy equal to a difference between a level of the electrical energy demand of the facility load and a level of the demand cap. 4. The method of claim 1 wherein the energy storage system comprises a battery. 5. The method of claim 4 wherein the discharge limit is at 100% power rating of the battery. 6. The method of claim 1 further comprising: dynamically adjusting the demand cap during operation of a power generation system that includes the energy storage system when the electrical energy demand of the facility load exceeds the maximum expected demand. 7. A power generation system comprising: an energy storage system; a photovoltaic system coupled to provide electrical energy to a facility load; and a control system configured to control discharge of electrical energy from the energy storage system to the facility load, the control system being configured to monitor demand of the facility load for electrical energy, to compare the demand of the facility load against a demand cap for a demand period, and to discharge electrical energy from the energy storage system at a discharge rate based on a comparison of the demand of the facility load for electrical energy and the demand cap. 8. The power generation system of claim 7 wherein the control system is configured to discharge electrical energy from the energy storage system to the facility load at full power when the energy storage system has sufficient electrical energy to discharge at full power for a duration equal to or longer than a remaining time of the demand period. 9. The power generation system of claim 7 wherein the energy storage system comprises a battery. 10. The power generation system of claim 7 wherein the control system is configured to adjust the demand cap when the demand of the facility load is greater than a maximum expected demand. 11. The power generation system of claim 10 wherein the control system increases the demand cap. 12. The power generation system of claim 7 wherein the energy storage system is coupled to a utility grid. 13. The power generation system of claim 12 wherein the energy storage system is charged with electrical energy from the utility grid when the demand of the facility load is less than the demand cap. 14. A method of dispatching electrical energy from an energy storage system, the method comprising: monitoring demand of a facility load for electrical energy; comparing a first demand of the facility load for electrical energy against a first demand cap during a first demand period; detecting that the first demand of the facility load for electrical energy is expected to be greater than the first demand cap; in response to detecting that the first demand of the facility load for electrical energy is expected to be greater than the first demand cap, discharging electrical energy from an energy storage system to the facility load at a first output power; detecting that the first demand of the facility load for electrical energy is not expected to be greater than the first demand cap; and in response to detecting that the first demand of the facility load for electrical energy is not expected to be greater than the first demand cap, charging the energy storage system at a first input power. 15. The method of claim 14 further comprising: detecting that the first demand of the facility load for electrical energy is greater than the maximum expected demand during the first demand period; and in response to detecting that the average of the first demand of the facility load for electrical energy is greater than the maximum expected demand during the first demand period, increasing the first demand cap. 16. The method of claim 14 wherein the energy storage system is charged at the first input power using electrical energy from a utility grid. 17. The method of claim 14 wherein the energy storage system comprises a battery. 18. The method of claim 14 further comprising: comparing a second demand of the facility load for electrical energy against a second demand cap during a second demand period following the first demand period; detecting that the second demand of the facility load for electrical energy is expected to be greater than the second demand cap; and in response to detecting that the second demand of the facility load for electrical energy is expected to be greater than the second demand cap, discharging electrical energy from the energy storage system to the facility load at a second output power during the second demand period. 19. The method of claim 18 further comprising: detecting that the second demand of the facility load for electrical energy is not greater than the second demand cap; and in response to detecting that the second demand of the facility load for electrical energy is not greater than the second demand cap, charging the energy storage system at a second input power. 20. The method of claim 18 further comprising: detecting that the second demand of the facility load for electrical energy is greater than the second expected maximum demand during the second demand period; and in response to detecting that the second demand of the facility load for electrical energy is greater than the second maximum demand during the second demand period, increasing the second demand cap. 